window.TallyLax=window.TallyLax||{};(function(TL){TL.UISave={showBar:function(){var root=document.getElementById('root');var html='<div class="panel"><h3>Management</h3><div class="flex">'+'<button class="btn" data-action="saveSlot" data-param="1">Save Slot 1</button>'+'<button class="btn" data-action="saveSlot" data-param="2">Save Slot 2</button>'+'<button class="btn" data-action="saveSlot" data-param="3">Save Slot 3</button>'+'<span class="right"></span>'+'<button class="btn" data-action="loadSlot" data-param="1">Load 1</button>'+'<button class="btn" data-action="loadSlot" data-param="2">Load 2</button>'+'<button class="btn" data-action="loadSlot" data-param="3">Load 3</button>'+'<span class="right"></span>'+'<button class="btn" data-action="exportSave">Export</button>'+'<label class="btn" style="cursor:pointer">Import<input type="file" id="importFile" style="display:none"/></label>'+'</div></div>';root.insertAdjacentHTML('beforeend',html);var f=document.getElementById('importFile');f.addEventListener('change',function(){if(this.files&&this.files[0]){TL.Persist.importFile(this.files[0],function(ok){if(ok){TL.UIDashboard.show()}})}})}};document.addEventListener('click',function(e){var el=e.target.closest('[data-action]');if(!el)return;var a=el.getAttribute('data-action'),p=el.getAttribute('data-param');if(a==='saveSlot'){TL.Persist.save(parseInt(p,10))}else if(a==='loadSlot'){if(TL.Persist.load(parseInt(p,10))){TL.UIDashboard.show()}}else if(a==='exportSave'){TL.Persist.export()}})})(window.TallyLax);