window.TallyLax=window.TallyLax||{};(function(TL){function rows(org,div,lvl){var games=(TL.GameState.gameLog||[]).filter(function(g){return g.division===div&&g.teamLevel===lvl&&(g.homeOrg===org||g.awayOrg===org)}).slice(-16).reverse();return games.map(function(g){var res=(g.homeOrg===org?g.result.home:g.result.away)+'-'+(g.homeOrg===org?g.result.away:g.result.home);return'<tr><td class="mono">Day '+g.day+'</td><td>'+g.awayOrg+' @ '+g.homeOrg+'</td><td class="mono">'+res+'</td></tr>'}).join('')}TL.UITeam={open:function(org,div,lvl){var table=TL.StandingsUtil.ensure(div,lvl)[org]||{W:0,L:0,GF:0,GA:0};var gd=(table.GF||0)-(table.GA||0);var logo='img/logos/'+org+'.png';var html='<div class="modal" id="teamModal"><div class="sheet"><div class="flex"><img src="'+logo+'" style="width:40px;height:40px;border-radius:8px"/><h3 style="margin:0">'+org+' — '+div+lvl+'</h3></div><div class="muted">Record '+(table.W||0)+'-'+(table.L||0)+' • GD '+gd+'</div><h4>Recent Games</h4><table class="grid"><thead><tr><th>Day</th><th>Matchup</th><th>Score</th></tr></thead><tbody>'+rows(org,div,lvl)+'</tbody></table><div class="flex" style="margin-top:8px"><button class="btn" data-action="closeTeam">Close</button></div></div></div>';document.body.insertAdjacentHTML('beforeend',html)}};document.addEventListener('click',function(e){var el=e.target.closest('[data-action]');if(!el)return;var a=el.getAttribute('data-action'),p=el.getAttribute('data-param');if(a==='openTeam'){var parts=p.split('|');TL.UITeam.open(parts[0],parts[1],parts[2])}else if(a==='closeTeam'){var m=document.getElementById('teamModal');if(m)m.remove()}})})(window.TallyLax);