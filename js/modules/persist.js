window.TallyLax=window.TallyLax||{};(function(TL){TL.Persist={key:function(s){return'TallyLax_save_'+(s||1)},save:function(s){try{localStorage.setItem(this.key(s),JSON.stringify(TL.GameState));return true}catch(e){return false}},load:function(s){try{var r=localStorage.getItem(this.key(s));if(!r)return false;TL.GameState=JSON.parse(r);return true}catch(e){return false}},export:function(){try{var b=new Blob([JSON.stringify(TL.GameState,null,2)],{type:'application/json'});var u=URL.createObjectURL(b);var a=document.createElement('a');a.href=u;a.download='TallyLax_save.json';a.click();setTimeout(function(){URL.revokeObjectURL(u)},1e3)}catch(e){}},importFile:function(f,cb){var r=new FileReader();r.onload=function(){try{TL.GameState=JSON.parse(r.result);cb&&cb(true)}catch(e){cb&&cb(false)}};r.readAsText(f)}}})(window.TallyLax);