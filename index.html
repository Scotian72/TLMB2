<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="TallyLax - Youth Box Lacrosse Organization Manager">
  <title>TallyLax v6.2 - FIXED</title>
  <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <!-- Banner for notifications -->
  <div id="banner" class="banner"></div>
  
  <!-- Sidebar Navigation -->
  <nav id="sidebar" class="sidebar hidden">
    <div class="sidebar-header">
      <img src="assets/logos/TLM_256.webp" alt="TallyLax" class="sidebar-logo">
      <h3 class="sidebar-title">TallyLax</h3>
    </div>
    
    <div class="sidebar-content">
      <!-- Main Section (Dropdown) -->
      <div class="nav-section">
        <div class="nav-dropdown" data-dropdown="main">
          <div class="nav-dropdown-header">
            <h4>Main</h4>
            <span class="dropdown-icon">▼</span>
          </div>
          <div class="nav-dropdown-content hidden">
            <button class="nav-button" data-action="dashboard">Dashboard</button>
            <button class="nav-button" data-action="organization">My Organization</button>
            <button class="nav-button" data-action="league-organizations">All Teams</button>
            <button class="nav-button" data-action="training-camp-dashboard">Training Camp</button>
          </div>
        </div>
      </div>
      
      <!-- Actions Section (Dropdown) -->
      <div class="nav-section">
        <div class="nav-dropdown" data-dropdown="actions">
          <div class="nav-dropdown-header">
            <h4>Actions</h4>
            <span class="dropdown-icon">▼</span>
          </div>
          <div class="nav-dropdown-content hidden">
            <button class="nav-button" data-action="schedule">Schedule</button>
            <button class="nav-button" data-action="standings">Standings</button>
            <button class="nav-button" data-action="save">Save Game</button>
            <button class="nav-button" data-action="load">Load Game</button>
          </div>
        </div>
      </div>
      
      <!-- Division Selection -->
      <div class="nav-section">
        <h4>Divisions</h4>
        <div class="division-list">
          <!-- U9 - Special case, Training Camp only -->
          <div class="division-item" data-division="U9">
            <div class="division-header">
              <span class="division-name">U9</span>
              <span class="division-ages">(Ages 7-8)</span>
              <span class="expand-icon">▼</span>
            </div>
            <div class="division-teams hidden">
              <button class="team-button complete-roster-btn" data-action="roster" data-param="U9" data-param2="TC">📋 Complete Roster</button>
              <button class="team-button" data-action="runcamp" data-param="U9">🏕️ Training Camp</button>
            </div>
          </div>
          
          <div class="division-item" data-division="U11">
            <div class="division-header">
              <span class="division-name">U11</span>
              <span class="division-ages">(Ages 9-10)</span>
              <span class="expand-icon">▼</span>
            </div>
            <div class="division-teams hidden">
              <button class="team-button complete-roster-btn" data-action="roster" data-param="U11" data-param2="both">📋 Complete Roster</button>
              <button class="team-button" data-action="roster" data-param="U11" data-param2="A">Team A</button>
              <button class="team-button" data-action="roster" data-param="U11" data-param2="B">Team B</button>
              <button class="team-button" data-action="runcamp" data-param="U11">🏕️ Training Camp</button>
            </div>
          </div>
          
          <div class="division-item" data-division="U13">
            <div class="division-header">
              <span class="division-name">U13</span>
              <span class="division-ages">(Ages 11-12)</span>
              <span class="expand-icon">▼</span>
            </div>
            <div class="division-teams hidden">
              <button class="team-button complete-roster-btn" data-action="roster" data-param="U13" data-param2="both">📋 Complete Roster</button>
              <button class="team-button" data-action="roster" data-param="U13" data-param2="A">Team A</button>
              <button class="team-button" data-action="roster" data-param="U13" data-param2="B">Team B</button>
              <button class="team-button" data-action="runcamp" data-param="U13">🏕️ Training Camp</button>
            </div>
          </div>
          
          <div class="division-item" data-division="U15">
            <div class="division-header">
              <span class="division-name">U15</span>
              <span class="division-ages">(Ages 13-14)</span>
              <span class="expand-icon">▼</span>
            </div>
            <div class="division-teams hidden">
              <button class="team-button complete-roster-btn" data-action="roster" data-param="U15" data-param2="both">📋 Complete Roster</button>
              <button class="team-button" data-action="roster" data-param="U15" data-param2="A">Team A</button>
              <button class="team-button" data-action="roster" data-param="U15" data-param2="B">Team B</button>
              <button class="team-button" data-action="runcamp" data-param="U15">🏕️ Training Camp</button>
            </div>
          </div>
          
          <div class="division-item" data-division="U17">
            <div class="division-header">
              <span class="division-name">U17</span>
              <span class="division-ages">(Ages 15-16)</span>
              <span class="expand-icon">▼</span>
            </div>
            <div class="division-teams hidden">
              <button class="team-button complete-roster-btn" data-action="roster" data-param="U17" data-param2="both">📋 Complete Roster</button>
              <button class="team-button" data-action="roster" data-param="U17" data-param2="A">Team A</button>
              <button class="team-button" data-action="roster" data-param="U17" data-param2="B">Team B</button>
              <button class="team-button" data-action="runcamp" data-param="U17">🏕️ Training Camp</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  
  <!-- Main Content Wrapper -->
  <div id="content-wrapper" class="content-wrapper">
    <main id="main-content">
      <div class="panel">
        <p>Loading TallyLax v6.2 (COMPLETELY FIXED)...</p>
      </div>
    </main>
  </div>

  <!-- ===== CRITICAL: Script Loading Order ===== -->
  <!-- Core modules (load first) -->
  <script src="js/core/constants.js"></script>
  <script src="js/core/game_state.js"></script>
  <script src="js/core/selectors.js"></script>
  <script src="js/core/rng.js"></script>
  <script src="js/core/keys.js"></script>
  
  <!-- Data modules -->
  <script src="js/data/teams.js"></script>
  
  <!-- System modules -->
  <script src="js/systems/schedule_system.js"></script>
  
  <!-- ✅ NEW: Jersey Manager (load before player generator) -->
  <script src="js/modules/jersey_manager.js"></script>
  
  <!-- Module systems -->
  <script src="js/modules/player_generator.js"></script>
  <script src="js/modules/lines_manager.js"></script>
  <script src="js/modules/season_manager.js"></script>
  
  <!-- UI modules -->
  <script src="
<script src="js/core/assets.js"></script>
<script src="js/core/event_bus.js"></script>
js/ui/ui_helpers.js"></script>
  <script src="js/ui/ui_setup.js"></script>
  <script src="js/ui/ui_dashboard.js"></script>
  <script src="js/ui/ui_roster.js"></script>
  <script src="js/ui/ui_player_card.js"></script>
  
  <!-- ✅ NEW: Player Editor -->
  <script src="js/ui/ui_player_editor.js"></script>
  
  <!-- Training camp UIs -->
  <script src="js/ui/ui_training_camp.js"></script>
  
  <!-- ✅ NEW: Training Camp Dashboard -->
  <script src="js/ui/ui_training_camp_dashboard.js"></script>
  
  <!-- ✅ NEW: Training Camp Scrimmages (v6.2 FIX) -->
  <script src="js/ui/ui_training_camp_scrimmages.js"></script>
  
  <!-- ✅ NEW: Training Camp Evaluations (v6.2 FIX) -->
  <script src="js/ui/ui_camp_evaluations.js"></script>
  
  <script src="js/ui/ui_lines.js"></script>
  <script src="js/ui/ui_schedule.js"></script>
  
  <!-- ✅ NEW: Organization with History -->
  <script src="js/ui/ui_organization.js"></script>
  
  <!-- ✅ NEW: League Organizations (ALL teams) -->
  <script src="js/ui/ui_league_organizations.js"></script>
  
  <!-- Router MUST load LAST -->
  <script src="js/core/router.js"></script>
  
  <!-- Initialize -->
  <script>
    // Initialize game state
    TL.initGameState();
    
    // Show setup screen
    TL.Router.route('setup');
    
    console.log('🎮 TallyLax v6.2 - COMPLETELY FIXED VERSION LOADED');
    console.log('✅ All critical fixes implemented');
  </script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  try {
    if (window.TL && TL.Assets && document.querySelector('.sidebar-logo')) {
      var el = document.querySelector('.sidebar-logo');
      if (window.devicePixelRatio && devicePixelRatio >= 1.5) {
        el.src = 'assets/logos/TLM_512.webp';
      } else {
        el.src = 'assets/logos/TLM_256.webp';
      }
    }
  } catch (e) {}
});
</script>


<script src="js/modules/camp_manager.js"></script>

<script src="js/modules/stats.js"></script>

<script src="js/ui/ui_training_camp_results.js"></script>

<script src="js/ui/ui_training_camp_auto.js"></script>

<script src="js/ui/ui_diagnostics_light.js"></script>

<div id="main"></div>
</body>
</html>
